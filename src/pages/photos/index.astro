---
import Layout from "~/layouts/Layout.astro";
import Wrapper from "~/components/wrapper.astro";
import Heading from "~/components/text/heading.astro";

const LICENSE_URL = "https://creativecommons.org/licenses/by-nc-sa/4.0/";
const LICENSE_LABEL = "CC BY-NC-SA 4.0";

import { photos } from "~/pages/photos/photos";

// newest first
photos.sort((a, b) => (a.date < b.date ? 1 : -1));
---

<Layout title="photos" description="A small archive of my photos.">
  <Wrapper>
    <header class="flex flex-wrap items-end justify-between gap-4">
      <div>
        <Heading Element="h1">Photos</Heading>
        <p class="mt-2 max-w-prose text-sm">
          A tiny archive of moments I like. Click any photo to open it.
        </p>

        <p class="mt-3 text-xs">
          Licensed under{" "}
          <a
            href={LICENSE_URL}
            target="_blank"
            rel="noreferrer"
            class="underline decoration-white/20 underline-offset-4 hover:decoration-white/50"
          >
            {LICENSE_LABEL}
          </a>
          .
        </p>
      </div>
    </header>

    <div
      id="grid"
      class="mt-6 grid gap-4"
      style="grid-template-columns: repeat(var(--cols, 3), minmax(0, 1fr));"
    >
      {
        photos.map((p) => (
          <figure class="group overflow-hidden rounded-3xl border border-white/10 bg-white/[0.03]">
            <a href={p.src} target="_blank" rel="noreferrer" class="block">
              <img
                src={p.src}
                alt={p.alt}
                loading="lazy"
                class="aspect-[4/5] w-full object-cover transition duration-300 group-hover:scale-[1.02]"
              />
            </a>

            <figcaption class="flex items-center justify-between gap-3 p-3 text-xs text-white/55">
              <span class="truncate">{p.alt}</span>
              <span class="shrink-0 text-white/40">{p.date}</span>
            </figcaption>
          </figure>
        ))
      }
    </div>

    {
      photos.length === 0 && (
        <p class="mt-6 text-sm text-white/50">not yet. soon.</p>
      )
    }
  </Wrapper>
</Layout>
